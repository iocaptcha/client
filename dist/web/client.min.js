(()=>{"use strict";var t={d:(e,n)=>{for(var o in n)t.o(n,o)&&!t.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:n[o]})}};t.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),t.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),t.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},t.d({},{o:()=>k});var e={};t.r(e),t.d(e,{CaptchaOptions:()=>h,Iocaptcha:()=>g,defaultOptions:()=>b,new_node:()=>u,render:()=>l,scan_and_render:()=>d});var n={};t.r(n),t.d(n,{Iosec:()=>m,IosecOptions:()=>w,new_node:()=>v,render:()=>f});const o="http://127.0.0.1:4173",i=o+"/index.html";var a;!function(t){t[t.Iosec=0]="Iosec",t[t.Iocaptcha=1]="Iocaptcha"}(a||(a={}));class r{constructor(t,e,n,o){this.type=t,this.formfield=e,this.id=n,this.iframe=o}start(t){var e;if(this.type!==a.Iosec)return c("widget: Attempted to start an iocaptcha widget (which start automatically). Only iosec widgets can be manually started.");null===(e=this.iframe.contentWindow)||void 0===e||e.postMessage({method:"start_iosec",action:t},{targetOrigin:i})}}function s(t){return Math.random().toString(36).replace(/[^a-z]+/g,"").substring(0,t)}function c(t){const e=new Error(t);if(k.CONFIG.throw_errors)throw e;return e}function l(t){var e,n,l,d,u,h;const b=t.getAttribute("data-pubkey");if(null==b)return c("io-captcha: missing data-pubkey attribute, can't continue");const g=null!==(e=t.getAttribute("data-callback-solve"))&&void 0!==e?e:"",w=window.callbacks[g],p=null!==(n=t.getAttribute("data-callback-error"))&&void 0!==n?n:"",m=window.callbacks[p],f=null!==(l=t.getAttribute("data-widgetid"))&&void 0!==l?l:s(5),v=null!==(d=t.getAttribute("data-theme"))&&void 0!==d?d:"light",k=parseFloat(null!==(u=t.getAttribute("data-scale"))&&void 0!==u?u:"1.0"),y=null!==(h=t.getAttribute("data-font"))&&void 0!==h?h:"roboto",_=window.document.createElement("input");_.hidden=!0,t.appendChild(_);const O=window.document.createElement("iframe");if(O.src=i,O.style.overflow="visible",O.style.border="none",O.style.position="absolute",t.appendChild(O),null==O.contentWindow)return c("io-captcha: iframe.contentWindow is null");const A=new r(a.Iocaptcha,_,f,O);return O.onload=()=>{var e,n,a,r,s;null===(e=O.contentWindow)||void 0===e||e.postMessage({method:"set_pubkey",pubkey:b},{targetOrigin:i}),null===(n=O.contentWindow)||void 0===n||n.postMessage({method:"set_widgetid",widgetid:f},{targetOrigin:i}),null===(a=O.contentWindow)||void 0===a||a.postMessage({method:"set_theme",theme:v},{targetOrigin:i}),null===(r=O.contentWindow)||void 0===r||r.postMessage({method:"set_scale",scale:k},{targetOrigin:i}),null===(s=O.contentWindow)||void 0===s||s.postMessage({method:"set_font",font:y},{targetOrigin:i}),window.addEventListener("message",(e=>{var n;if(e.origin.toString()!==o.toString())return;const i=e.data;i.id===f&&("set_pass_uuid"===i.method?(function(t,e){t.formfield.setAttribute("iocaptcha-pass-uuid",e)}(A,i.uuid),null!=g&&setTimeout((()=>{null!=w&&w(i.uuid)}))):"set_error"===i.method?null!=m&&setTimeout((()=>{null!=m&&m(i.error)})):"api_hello"===i.method?null===(n=e.source)||void 0===n||n.postMessage({method:"hello_ui"},{targetOrigin:"*"}):"size_change"===i.method?function(t,e,n){t.height=e,t.width=n}(O,i.height,i.width):"dflex_size_change_complete"===i.method&&(t.style.paddingBottom=i.height.toString()))}))},A}function d(){const t=window.document.getElementsByClassName("io-captcha");for(let e=0;e<t.length;e++)l(t[e])}function u(t,e,n){const o=document.createElement("div");if(o.className="io-captcha",o.setAttribute("data-widgetid",e),o.setAttribute("data-pubkey",n.pubkey),null!==n.callbackSolve){const t=s(16);window.callbacks[t]=n.callbackSolve,o.setAttribute("data-callback-solve",t)}if(null!==n.callbackError){const t=s(16);window.callbacks[t]=n.callbackError,o.setAttribute("data-callback-error",t)}return o.setAttribute("data-theme",n.theme),o.setAttribute("data-font",n.font),o.setAttribute("data-scale",n.scale.toString()),t.appendChild(o),l(o),o}class h{constructor(t,e,n,o,i,a){this.pubkey=t,this.callbackSolve=e,this.callbackError=n,this.theme=o,this.font=i,this.scale=a,this.pubkey=t,this.theme=o,this.font=i,this.scale=a}}function b(t){return new h(t,void 0,void 0,"light","roboto",1)}class g{create(t,e,n){n=n instanceof h?n:b(n),e=null!=e?e:s(16);const o=document.querySelector(t);if(null===o){const t=new Error("Target element not found.");if(k.CONFIG.throw_errors)throw t;return t}return l(u(o,e,n))}}window.document.addEventListener("DOMContentLoaded",(()=>{k.CONFIG.scan_immediately&&d()}));class w{constructor(t,e,n,o){this.pubkey=t,this.action=e,this.callbackTokenRefresh=n,this.callbackError=o,this.pubkey=t,this.action=e}}const p=["new_pass_uuid"];class m{constructor(){this.events={}}connect(t,e){if(!p.includes(t))return c(`Invalid event type: ${t}, possible events: ${p.join(", ")}`);void 0===this.events[t]&&(this.events[t]=[]),this.events[t].push(e)}create(t,e,n){e=null!=e?e:s(16);const o=document.querySelector(t);if(null===o){const t=new Error("Target element not found.");if(k.CONFIG.throw_errors)throw t;return t}return f(v(o,e,n))}}function f(t){var e,n,l,d;const u=t.getAttribute("data-pubkey");if(null==u)return c("io-sec: missing data-pubkey attribute, can't continue");const h=null!==(e=t.getAttribute("data-callback-token-refresh"))&&void 0!==e?e:"",b=window.callbacks[h],g=null!==(n=t.getAttribute("data-callback-error"))&&void 0!==n?n:"",w=window.callbacks[g],p=null!==(l=t.getAttribute("data-widgetid"))&&void 0!==l?l:s(5),m=null!==(d=t.getAttribute("data-action"))&&void 0!==d?d:"unspecified",f=window.document.createElement("input");f.hidden=!0,t.appendChild(f);const v=window.document.createElement("iframe");v.src=i,v.hidden=!0,t.appendChild(v);const k=new r(a.Iosec,f,p,v);return v.onload=()=>{var t,e,n;null===(t=v.contentWindow)||void 0===t||t.postMessage({method:"set_pubkey_iosec",pubkey:u},{targetOrigin:i}),null===(e=v.contentWindow)||void 0===e||e.postMessage({method:"set_widgetid_iosec",widgetid:p},{targetOrigin:i}),null===(n=v.contentWindow)||void 0===n||n.postMessage({method:"set_action_iosec",action:m},{targetOrigin:i}),window.addEventListener("message",(t=>{var e;if(t.origin.toString()!==o.toString())return;const{id:n,method:i,uuid:a}=t.data;n===p&&("set_pass_uuid"===i?void 0!==b&&setTimeout((()=>{b(a)})):"set_error"===i?null!=w&&setTimeout((()=>{null!=w&&w(c)})):"api_hello"===i&&(null===(e=t.source)||void 0===e||e.postMessage({method:"hello_ui"},{targetOrigin:"*"})))}))},k}function v(t,e,n){const o=document.createElement("div");if(o.className="io-sec",o.setAttribute("data-widgetid",e),o.setAttribute("data-pubkey",n.pubkey),o.setAttribute("data-action",n.action),null!=n.callbackTokenRefresh){const t=s(16);window.callbacks[t]=n.callbackTokenRefresh,o.setAttribute("data-callback-token-refresh",t)}if(null!=n.callbackError){const t=s(16);window.callbacks[t]=n.callbackError,o.setAttribute("data-callback-error",t)}return t.appendChild(o),f(o),o}const k={captcha:e,iosec:n,CONFIG:{throw_errors:!1,scan_immediately:!0}};try{(null!==window&&void 0!==window?window:t.g).iocom=k}catch(t){Object.defineProperty(window,"iocom",k)}})();